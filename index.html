<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåê Tic-Tac-Toe Network | –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #3a86ff;
            --secondary-color: #8338ec;
            --accent-color: #ff006e;
            --success-color: #38b000;
            --warning-color: #ffbe0b;
            --danger-color: #fb5607;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --gray-color: #6c757d;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-color) 0%, #16213e 100%);
            color: var(--light-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .lang-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--light-color);
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            position: relative;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 3.2rem;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            color: var(--gray-color);
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        .menu {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .menu-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--light-color);
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .menu-btn.active {
            background: var(--primary-color);
            box-shadow: 0 0 20px rgba(58, 134, 255, 0.5);
        }
        
        .menu-btn i {
            font-size: 1.2rem;
        }
        
        .game-container {
            display: none;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
        }
        
        .game-container.active {
            display: grid;
        }
        
        @media (max-width: 992px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title i {
            color: var(--accent-color);
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--warning-color);
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--gray-color);
            margin-top: 5px;
        }
        
        .connection-status {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: bold;
        }
        
        .connected {
            background: rgba(56, 176, 0, 0.15);
            color: var(--success-color);
            border: 1px solid rgba(56, 176, 0, 0.3);
        }
        
        .disconnected {
            background: rgba(251, 86, 7, 0.15);
            color: var(--danger-color);
            border: 1px solid rgba(251, 86, 7, 0.3);
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .connected .status-dot {
            background-color: var(--success-color);
            box-shadow: 0 0 10px var(--success-color);
        }
        
        .disconnected .status-dot {
            background-color: var(--danger-color);
        }
        
        .game-info {
            margin-bottom: 20px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .info-label {
            color: var(--gray-color);
        }
        
        .info-value {
            font-weight: 600;
        }
        
        .symbol {
            display: inline-block;
            width: 28px;
            height: 28px;
            border-radius: 6px;
            text-align: center;
            line-height: 28px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .symbol.x {
            background-color: var(--accent-color);
            color: white;
        }
        
        .symbol.o {
            background-color: var(--primary-color);
            color: white;
        }
        
        .game-board {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .game-status {
            font-size: 1.8rem;
            margin-bottom: 25px;
            text-align: center;
            padding: 15px 25px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .game-status.win {
            background: rgba(56, 176, 0, 0.15);
            color: var(--success-color);
            border-color: rgba(56, 176, 0, 0.3);
        }
        
        .game-status.lose {
            background: rgba(251, 86, 7, 0.15);
            color: var(--danger-color);
            border-color: rgba(251, 86, 7, 0.3);
        }
        
        .game-status.draw {
            background: rgba(255, 190, 11, 0.15);
            color: var(--warning-color);
            border-color: rgba(255, 190, 11, 0.3);
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 15px;
            margin: 20px auto;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .cell {
            background: rgba(255, 255, 255, 0.07);
            border: none;
            border-radius: 12px;
            font-size: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .cell::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .cell:hover::before {
            opacity: 1;
        }
        
        .cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .cell:disabled {
            cursor: not-allowed;
            opacity: 0.9;
        }
        
        .cell:disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        .cell.x {
            color: var(--accent-color);
            text-shadow: 0 0 20px rgba(255, 0, 110, 0.5);
        }
        
        .cell.o {
            color: var(--primary-color);
            text-shadow: 0 0 20px rgba(58, 134, 255, 0.5);
        }
        
        .winning-cell {
            background: rgba(255, 190, 11, 0.2);
            animation: pulse 1.5s infinite;
            position: relative;
        }
        
        .winning-cell::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 190, 11, 0.2), transparent);
            animation: shine 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 190, 11, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 190, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 190, 11, 0); }
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2a75ff;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(58, 134, 255, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light-color);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .btn-accent {
            background: var(--accent-color);
            color: white;
        }
        
        .btn-accent:hover {
            background: #e00063;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 0, 110, 0.4);
        }
        
        .btn:disabled {
            background: var(--gray-color);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .players-list {
            margin-top: 20px;
        }
        
        .player-item {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        
        .player-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .current-player {
            border-left: 4px solid var(--accent-color);
        }
        
        .game-id-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px dashed rgba(255, 255, 255, 0.2);
        }
        
        .game-id {
            font-family: monospace;
            font-size: 1.5rem;
            letter-spacing: 2px;
            color: var(--warning-color);
            font-weight: bold;
            margin-top: 5px;
            display: block;
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .input-group input {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
        }
        
        .difficulty-levels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .level-btn {
            padding: 15px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--light-color);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .level-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }
        
        .level-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            box-shadow: 0 5px 15px rgba(58, 134, 255, 0.3);
        }
        
        .level-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .level-desc {
            font-size: 0.8rem;
            color: var(--gray-color);
        }
        
        .menu-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }
        
        .menu-screen.active {
            display: flex;
        }
        
        .menu-title {
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: var(--primary-color);
        }
        
        .menu-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 500px;
            width: 100%;
        }
        
        .menu-option {
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .menu-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .menu-option i {
            font-size: 3rem;
            color: var(--accent-color);
        }
        
        .option-title {
            font-size: 1.8rem;
            color: var(--light-color);
        }
        
        .option-desc {
            color: var(--gray-color);
            font-size: 1rem;
        }
        
        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--gray-color);
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 12px;
            background: var(--primary-color);
            color: white;
            font-weight: 600;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .game-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .menu {
                flex-direction: column;
                align-items: center;
            }
            
            .menu-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .difficulty-levels {
                grid-template-columns: 1fr;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .board {
                max-width: 350px;
            }
            
            .cell {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <button class="lang-btn" id="langBtn">
            <i class="fas fa-globe"></i>
            <span id="langText">–†—É—Å—Å–∫–∏–π</span>
        </button>
    </div>
    
    <div class="container">
        <header>
            <h1 id="gameTitle">üåê Tic-Tac-Toe Network</h1>
            <div class="subtitle" id="gameSubtitle">–°–µ—Ç–µ–≤—ã–µ –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ —Å –¥—Ä—É–∑—å—è–º–∏ –∏ –ò–ò</div>
        </header>
        
        <div class="menu">
            <button class="menu-btn active" id="playBtn" data-screen="game">
                <i class="fas fa-gamepad"></i>
                <span id="menuPlay">–ò–≥—Ä–∞—Ç—å</span>
            </button>
            <button class="menu-btn" id="multiplayerBtn" data-screen="multiplayer">
                <i class="fas fa-users"></i>
                <span id="menuMultiplayer">–°–µ—Ç—å</span>
            </button>
            <button class="menu-btn" id="statsBtn" data-screen="stats">
                <i class="fas fa-chart-bar"></i>
                <span id="menuStats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </button>
            <button class="menu-btn" id="settingsBtn" data-screen="settings">
                <i class="fas fa-cog"></i>
                <span id="menuSettings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </button>
        </div>
        
        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="game-container active" id="gameScreen">
            <div class="panel">
                <div class="panel-title">
                    <i class="fas fa-user"></i>
                    <span id="playerTitle">–ò–≥—Ä–æ–∫</span>
                </div>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-value" id="winsCount">0</div>
                        <div class="stat-label" id="winsLabel">–ü–æ–±–µ–¥</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="lossesCount">0</div>
                        <div class="stat-label" id="lossesLabel">–ü–æ—Ä–∞–∂–µ–Ω–∏–π</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="drawsCount">0</div>
                        <div class="stat-label" id="drawsLabel">–ù–∏—á—å–∏—Ö</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="scoreCount">0</div>
                        <div class="stat-label" id="scoreLabel">–û—á–∫–∏</div>
                    </div>
                </div>
                
                <div class="connection-status disconnected" id="connectionStatus">
                    <div class="status-dot"></div>
                    <span id="statusText">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
                </div>
                
                <div class="game-info">
                    <div class="info-row">
                        <span class="info-label" id="playerNameLabel">–ò–º—è:</span>
                        <span class="info-value" id="playerName">–ò–≥—Ä–æ–∫ 1</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label" id="playerSymbolLabel">–°–∏–º–≤–æ–ª:</span>
                        <span class="info-value">
                            <span class="symbol x" id="playerSymbol">X</span>
                        </span>
                    </div>
                    <div class="info-row">
                        <span class="info-label" id="playerLevelLabel">–£—Ä–æ–≤–µ–Ω—å:</span>
                        <span class="info-value" id="playerLevel">–õ–µ–≥–∫–∏–π</span>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" id="newGameBtn">
                        <i class="fas fa-plus-circle"></i>
                        <span id="newGameText">–ù–æ–≤–∞—è –∏–≥—Ä–∞</span>
                    </button>
                    <button class="btn btn-secondary" id="restartBtn" disabled>
                        <i class="fas fa-redo"></i>
                        <span id="restartText">–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫</span>
                    </button>
                    <button class="btn btn-accent" id="disconnectBtn" disabled>
                        <i class="fas fa-sign-out-alt"></i>
                        <span id="disconnectText">–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è</span>
                    </button>
                </div>
            </div>
            
            <div class="panel game-board">
                <div class="game-status" id="gameStatus">
                    <span id="statusMessage">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏–≥—Ä—ã</span>
                </div>
                
                <div class="board" id="gameBoard">
                    <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ JavaScript -->
                </div>
                
                <div class="game-id-display">
                    <div id="gameIdLabel">ID –∏–≥—Ä—ã:</div>
                    <span class="game-id" id="gameId">-----</span>
                </div>
                
                <div class="input-group">
                    <input type="text" id="gameIdInput" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä—ã">
                    <button class="btn btn-primary" id="connectBtn">
                        <i class="fas fa-plug"></i>
                        <span id="connectText">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</span>
                    </button>
                </div>
                
                <div class="difficulty-levels">
                    <div class="level-btn active" data-level="easy">
                        <div class="level-name" id="levelEasy">–õ–µ–≥–∫–∏–π</div>
                        <div class="level-desc" id="levelEasyDesc">–ò–ò –¥–µ–ª–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ö–æ–¥—ã</div>
                    </div>
                    <div class="level-btn" data-level="medium">
                        <div class="level-name" id="levelMedium">–°—Ä–µ–¥–Ω–∏–π</div>
                        <div class="level-desc" id="levelMediumDesc">–ò–ò –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</div>
                    </div>
                    <div class="level-btn" data-level="hard">
                        <div class="level-name" id="levelHard">–°–ª–æ–∂–Ω—ã–π</div>
                        <div class="level-desc" id="levelHardDesc">–ò–ò –ø–æ—á—Ç–∏ –Ω–µ–ø–æ–±–µ–¥–∏–º</div>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">
                    <i class="fas fa-users"></i>
                    <span id="playersTitle">–ò–≥—Ä–æ–∫–∏</span>
                </div>
                
                <div class="players-list" id="playersList">
                    <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
                
                <div class="controls">
                    <button class="btn btn-secondary" id="aiGameBtn">
                        <i class="fas fa-robot"></i>
                        <span id="aiGameText">–ò–≥—Ä–∞—Ç—å —Å –ò–ò</span>
                    </button>
                    <button class="btn btn-primary" id="createGameBtn">
                        <i class="fas fa-network-wired"></i>
                        <span id="createGameText">–°–æ–∑–¥–∞—Ç—å —Å–µ—Ç–µ–≤—É—é –∏–≥—Ä—É</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –º–µ–Ω—é -->
        <div class="menu-screen" id="menuScreen">
            <div class="menu-title" id="menuTitle">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</div>
            <div class="menu-options">
                <div class="menu-option" id="playOption">
                    <i class="fas fa-gamepad"></i>
                    <div class="option-title" id="playOptionTitle">–ò–≥—Ä–∞—Ç—å</div>
                    <div class="option-desc" id="playOptionDesc">–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É —Å –ò–ò</div>
                </div>
                <div class="menu-option" id="multiplayerOption">
                    <i class="fas fa-users"></i>
                    <div class="option-title" id="multiplayerOptionTitle">–°–µ—Ç–µ–≤–∞—è –∏–≥—Ä–∞</div>
                    <div class="option-desc" id="multiplayerOptionDesc">–ò–≥—Ä–∞—Ç—å —Å –¥—Ä—É–≥–æ–º –ø–æ —Å–µ—Ç–∏</div>
                </div>
                <div class="menu-option" id="statsOption">
                    <i class="fas fa-chart-bar"></i>
                    <div class="option-title" id="statsOptionTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    <div class="option-desc" id="statsOptionDesc">–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∞—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
                </div>
                <div class="menu-option" id="settingsOption">
                    <i class="fas fa-cog"></i>
                    <div class="option-title" id="settingsOptionTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                    <div class="option-desc" id="settingsOptionDesc">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</div>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div class="menu-screen" id="statsScreen">
            <div class="menu-title" id="statsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-value" id="totalGames">0</div>
                    <div class="stat-label" id="totalGamesLabel">–í—Å–µ–≥–æ –∏–≥—Ä</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="totalWins">0</div>
                    <div class="stat-label" id="totalWinsLabel">–ü–æ–±–µ–¥</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="totalLosses">0</div>
                    <div class="stat-label" id="totalLossesLabel">–ü–æ—Ä–∞–∂–µ–Ω–∏–π</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="totalDraws">0</div>
                    <div class="stat-label" id="totalDrawsLabel">–ù–∏—á—å–∏—Ö</div>
                </div>
            </div>
            <div class="controls" style="margin-top: 30px;">
                <button class="btn btn-secondary" id="resetStatsBtn">
                    <i class="fas fa-trash-alt"></i>
                    <span id="resetStatsText">–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</span>
                </button>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div class="menu-screen" id="settingsScreen">
            <div class="menu-title" id="settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="settings-options">
                <div class="info-row" style="margin-bottom: 20px;">
                    <span class="info-label">–ò–º—è –∏–≥—Ä–æ–∫–∞:</span>
                    <input type="text" id="playerNameInput" value="–ò–≥—Ä–æ–∫ 1" style="width: 200px;">
                </div>
                <div class="info-row" style="margin-bottom: 20px;">
                    <span class="info-label">–Ø–∑—ã–∫:</span>
                    <select id="languageSelect" style="padding: 10px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.2);">
                        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="info-row" style="margin-bottom: 20px;">
                    <span class="info-label">–ó–≤—É–∫–∏:</span>
                    <input type="checkbox" id="soundToggle" checked style="transform: scale(1.5);">
                </div>
                <div class="info-row" style="margin-bottom: 20px;">
                    <span class="info-label">–ê–Ω–∏–º–∞—Ü–∏–∏:</span>
                    <input type="checkbox" id="animationToggle" checked style="transform: scale(1.5);">
                </div>
            </div>
            <div class="controls" style="margin-top: 30px;">
                <button class="btn btn-primary" id="saveSettingsBtn">
                    <i class="fas fa-save"></i>
                    <span id="saveSettingsText">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </div>
        </div>
        
        <footer>
            <div id="footerText">–°–µ—Ç–µ–≤—ã–µ –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ &copy; 2023 | –°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∏–≥—Ä</div>
        </footer>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</span>
    </div>

    <script>
        // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
        const translations = {
            ru: {
                gameTitle: "üåê –ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏ –°–µ—Ç—å",
                gameSubtitle: "–°–µ—Ç–µ–≤—ã–µ –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ —Å –¥—Ä—É–∑—å—è–º–∏ –∏ –ò–ò",
                menuPlay: "–ò–≥—Ä–∞—Ç—å",
                menuMultiplayer: "–°–µ—Ç—å",
                menuStats: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
                menuSettings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                playerTitle: "–ò–≥—Ä–æ–∫",
                winsLabel: "–ü–æ–±–µ–¥",
                lossesLabel: "–ü–æ—Ä–∞–∂–µ–Ω–∏–π",
                drawsLabel: "–ù–∏—á—å–∏—Ö",
                scoreLabel: "–û—á–∫–∏",
                statusText: "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ",
                playerNameLabel: "–ò–º—è:",
                playerSymbolLabel: "–°–∏–º–≤–æ–ª:",
                playerLevelLabel: "–£—Ä–æ–≤–µ–Ω—å:",
                newGameText: "–ù–æ–≤–∞—è –∏–≥—Ä–∞",
                restartText: "–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫",
                disconnectText: "–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è",
                statusMessage: "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏–≥—Ä—ã",
                gameIdLabel: "ID –∏–≥—Ä—ã:",
                connectText: "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è",
                levelEasy: "–õ–µ–≥–∫–∏–π",
                levelEasyDesc: "–ò–ò –¥–µ–ª–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ö–æ–¥—ã",
                levelMedium: "–°—Ä–µ–¥–Ω–∏–π",
                levelMediumDesc: "–ò–ò –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏",
                levelHard: "–°–ª–æ–∂–Ω—ã–π",
                levelHardDesc: "–ò–ò –ø–æ—á—Ç–∏ –Ω–µ–ø–æ–±–µ–¥–∏–º",
                playersTitle: "–ò–≥—Ä–æ–∫–∏",
                aiGameText: "–ò–≥—Ä–∞—Ç—å —Å –ò–ò",
                createGameText: "–°–æ–∑–¥–∞—Ç—å —Å–µ—Ç–µ–≤—É—é –∏–≥—Ä—É",
                menuTitle: "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
                playOptionTitle: "–ò–≥—Ä–∞—Ç—å",
                playOptionDesc: "–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É —Å –ò–ò",
                multiplayerOptionTitle: "–°–µ—Ç–µ–≤–∞—è –∏–≥—Ä–∞",
                multiplayerOptionDesc: "–ò–≥—Ä–∞—Ç—å —Å –¥—Ä—É–≥–æ–º –ø–æ —Å–µ—Ç–∏",
                statsOptionTitle: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
                statsOptionDesc: "–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∞—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",
                settingsOptionTitle: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                settingsOptionDesc: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞",
                statsTitle: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
                totalGamesLabel: "–í—Å–µ–≥–æ –∏–≥—Ä",
                totalWinsLabel: "–ü–æ–±–µ–¥",
                totalLossesLabel: "–ü–æ—Ä–∞–∂–µ–Ω–∏–π",
                totalDrawsLabel: "–ù–∏—á—å–∏—Ö",
                resetStatsText: "–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É",
                settingsTitle: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                saveSettingsText: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",
                footerText: "–°–µ—Ç–µ–≤—ã–µ –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ &copy; 2023 | –°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∏–≥—Ä",
                connected: "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ",
                yourTurn: "–í–∞—à —Ö–æ–¥!",
                opponentTurn: "–•–æ–¥ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞...",
                youWin: "–í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ",
                youLose: "–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! üò¢",
                draw: "–ù–∏—á—å—è! ü§ù",
                waitingForPlayer: "–û–∂–∏–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞...",
                gameCreated: "–ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞! ID:",
                gameJoined: "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –∏–≥—Ä–µ",
                notificationConnected: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ",
                notificationDisconnected: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ",
                notificationGameCreated: "–ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞!",
                notificationGameJoined: "–í—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –∏–≥—Ä–µ",
                notificationMoveMade: "–•–æ–¥ —Å–¥–µ–ª–∞–Ω",
                notificationStatsReset: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞",
                notificationSettingsSaved: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",
                langText: "–†—É—Å—Å–∫–∏–π"
            },
            en: {
                gameTitle: "üåê Tic-Tac-Toe Network",
                gameSubtitle: "Online tic-tac-toe with friends and AI",
                menuPlay: "Play",
                menuMultiplayer: "Network",
                menuStats: "Statistics",
                menuSettings: "Settings",
                playerTitle: "Player",
                winsLabel: "Wins",
                lossesLabel: "Losses",
                drawsLabel: "Draws",
                scoreLabel: "Score",
                statusText: "Disconnected",
                playerNameLabel: "Name:",
                playerSymbolLabel: "Symbol:",
                playerLevelLabel: "Level:",
                newGameText: "New Game",
                restartText: "Restart",
                disconnectText: "Disconnect",
                statusMessage: "Select game mode",
                gameIdLabel: "Game ID:",
                connectText: "Connect",
                levelEasy: "Easy",
                levelEasyDesc: "AI makes random moves",
                levelMedium: "Medium",
                levelMediumDesc: "AI uses basic strategies",
                levelHard: "Hard",
                levelHardDesc: "AI is almost unbeatable",
                playersTitle: "Players",
                aiGameText: "Play with AI",
                createGameText: "Create Network Game",
                menuTitle: "Main Menu",
                playOptionTitle: "Play",
                playOptionDesc: "Start a new game with AI",
                multiplayerOptionTitle: "Network Game",
                multiplayerOptionDesc: "Play with a friend online",
                statsOptionTitle: "Statistics",
                statsOptionDesc: "View your results",
                settingsOptionTitle: "Settings",
                settingsOptionDesc: "Game and interface settings",
                statsTitle: "Statistics",
                totalGamesLabel: "Total Games",
                totalWinsLabel: "Wins",
                totalLossesLabel: "Losses",
                totalDrawsLabel: "Draws",
                resetStatsText: "Reset Statistics",
                settingsTitle: "Settings",
                saveSettingsText: "Save Settings",
                footerText: "Tic-Tac-Toe Network &copy; 2023 | Made with ‚ù§Ô∏è for game lovers",
                connected: "Connected",
                yourTurn: "Your turn!",
                opponentTurn: "Opponent's turn...",
                youWin: "You win! üéâ",
                youLose: "You lose! üò¢",
                draw: "Draw! ü§ù",
                waitingForPlayer: "Waiting for second player...",
                gameCreated: "Game created! ID:",
                gameJoined: "Connected to game",
                notificationConnected: "Connection established",
                notificationDisconnected: "Connection lost",
                notificationGameCreated: "Game created!",
                notificationGameJoined: "You joined the game",
                notificationMoveMade: "Move made",
                notificationStatsReset: "Statistics reset",
                notificationSettingsSaved: "Settings saved",
                langText: "English"
            }
        };

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentLanguage = 'ru';
        let socket = null;
        let gameId = null;
        let playerId = null;
        let playerName = "–ò–≥—Ä–æ–∫ 1";
        let playerSymbol = "X";
        let currentPlayer = "X";
        let gameBoard = Array(9).fill(null);
        let gameActive = false;
        let isConnected = false;
        let isAIGame = false;
        let difficulty = "easy";
        
        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        let stats = {
            wins: 0,
            losses: 0,
            draws: 0,
            score: 0,
            totalGames: 0,
            totalWins: 0,
            totalLosses: 0,
            totalDraws: 0
        };
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const gameScreen = document.getElementById('gameScreen');
        const menuScreen = document.getElementById('menuScreen');
        const statsScreen = document.getElementById('statsScreen');
        const settingsScreen = document.getElementById('settingsScreen');
        const gameStatus = document.getElementById('gameStatus');
        const gameBoardElement = document.getElementById('gameBoard');
        const connectionStatus = document.getElementById('connectionStatus');
        const playerNameElement = document.getElementById('playerName');
        const playerSymbolElement = document.getElementById('playerSymbol');
        const gameIdElement = document.getElementById('gameId');
        const gameIdInput = document.getElementById('gameIdInput');
        const newGameBtn = document.getElementById('newGameBtn');
        const connectBtn = document.getElementById('connectBtn');
        const restartBtn = document.getElementById('restartBtn');
        const disconnectBtn = document.getElementById('disconnectBtn');
        const playersList = document.getElementById('playersList');
        const aiGameBtn = document.getElementById('aiGameBtn');
        const createGameBtn = document.getElementById('createGameBtn');
        const levelButtons = document.querySelectorAll('.level-btn');
        const menuButtons = document.querySelectorAll('.menu-btn');
        const langBtn = document.getElementById('langBtn');
        const langText = document.getElementById('langText');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const winsCount = document.getElementById('winsCount');
        const lossesCount = document.getElementById('lossesCount');
        const drawsCount = document.getElementById('drawsCount');
        const scoreCount = document.getElementById('scoreCount');
        const totalGames = document.getElementById('totalGames');
        const totalWins = document.getElementById('totalWins');
        const totalLosses = document.getElementById('totalLosses');
        const totalDraws = document.getElementById('totalDraws');
        const resetStatsBtn = document.getElementById('resetStatsBtn');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
        const playerNameInput = document.getElementById('playerNameInput');
        const languageSelect = document.getElementById('languageSelect');
        const soundToggle = document.getElementById('soundToggle');
        const animationToggle = document.getElementById('animationToggle');
        const saveSettingsBtn = document.getElementById('saveSettingsBtn');
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function translateUI(lang) {
            currentLanguage = lang;
            const t = translations[lang];
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            document.getElementById('gameTitle').textContent = t.gameTitle;
            document.getElementById('gameSubtitle').textContent = t.gameSubtitle;
            document.getElementById('menuPlay').textContent = t.menuPlay;
            document.getElementById('menuMultiplayer').textContent = t.menuMultiplayer;
            document.getElementById('menuStats').textContent = t.menuStats;
            document.getElementById('menuSettings').textContent = t.menuSettings;
            document.getElementById('playerTitle').textContent = t.playerTitle;
            document.getElementById('winsLabel').textContent = t.winsLabel;
            document.getElementById('lossesLabel').textContent = t.lossesLabel;
            document.getElementById('drawsLabel').textContent = t.drawsLabel;
            document.getElementById('scoreLabel').textContent = t.scoreLabel;
            document.getElementById('statusText').textContent = t.statusText;
            document.getElementById('playerNameLabel').textContent = t.playerNameLabel;
            document.getElementById('playerSymbolLabel').textContent = t.playerSymbolLabel;
            document.getElementById('playerLevelLabel').textContent = t.playerLevelLabel;
            document.getElementById('newGameText').textContent = t.newGameText;
            document.getElementById('restartText').textContent = t.restartText;
            document.getElementById('disconnectText').textContent = t.disconnectText;
            document.getElementById('statusMessage').textContent = t.statusMessage;
            document.getElementById('gameIdLabel').textContent = t.gameIdLabel;
            document.getElementById('connectText').textContent = t.connectText;
            document.getElementById('levelEasy').textContent = t.levelEasy;
            document.getElementById('levelEasyDesc').textContent = t.levelEasyDesc;
            document.getElementById('levelMedium').textContent = t.levelMedium;
            document.getElementById('levelMediumDesc').textContent = t.levelMediumDesc;
            document.getElementById('levelHard').textContent = t.levelHard;
            document.getElementById('levelHardDesc').textContent = t.levelHardDesc;
            document.getElementById('playersTitle').textContent = t.playersTitle;
            document.getElementById('aiGameText').textContent = t.aiGameText;
            document.getElementById('createGameText').textContent = t.createGameText;
            document.getElementById('menuTitle').textContent = t.menuTitle;
            document.getElementById('playOptionTitle').textContent = t.playOptionTitle;
            document.getElementById('playOptionDesc').textContent = t.playOptionDesc;
            document.getElementById('multiplayerOptionTitle').textContent = t.multiplayerOptionTitle;
            document.getElementById('multiplayerOptionDesc').textContent = t.multiplayerOptionDesc;
            document.getElementById('statsOptionTitle').textContent = t.statsOptionTitle;
            document.getElementById('statsOptionDesc').textContent = t.statsOptionDesc;
            document.getElementById('settingsOptionTitle').textContent = t.settingsOptionTitle;
            document.getElementById('settingsOptionDesc').textContent = t.settingsOptionDesc;
            document.getElementById('statsTitle').textContent = t.statsTitle;
            document.getElementById('totalGamesLabel').textContent = t.totalGamesLabel;
            document.getElementById('totalWinsLabel').textContent = t.totalWinsLabel;
            document.getElementById('totalLossesLabel').textContent = t.totalLossesLabel;
            document.getElementById('totalDrawsLabel').textContent = t.totalDrawsLabel;
            document.getElementById('resetStatsText').textContent = t.resetStatsText;
            document.getElementById('settingsTitle').textContent = t.settingsTitle;
            document.getElementById('saveSettingsText').textContent = t.saveSettingsText;
            document.getElementById('footerText').textContent = t.footerText;
            langText.textContent = t.langText;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º placeholder
            gameIdInput.placeholder = lang === 'ru' ? '–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä—ã' : 'Enter game ID';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
            if (isConnected) {
                document.getElementById('statusText').textContent = t.connected;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —è–∑—ã–∫ –≤ localStorage
            localStorage.setItem('ticTacToeLanguage', lang);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message) {
            notificationText.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        function updateStatsDisplay() {
            winsCount.textContent = stats.wins;
            lossesCount.textContent = stats.losses;
            drawsCount.textContent = stats.draws;
            scoreCount.textContent = stats.score;
            
            totalGames.textContent = stats.totalGames;
            totalWins.textContent = stats.totalWins;
            totalLosses.textContent = stats.totalLosses;
            totalDraws.textContent = stats.totalDraws;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ localStorage
        function loadStats() {
            const savedStats = localStorage.getItem('ticTacToeStats');
            if (savedStats) {
                stats = JSON.parse(savedStats);
                updateStatsDisplay();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ localStorage
        function saveStats() {
            localStorage.setItem('ticTacToeStats', JSON.stringify(stats));
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
        function checkWinner(board) {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // —Å—Ç—Ä–æ–∫–∏
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // —Å—Ç–æ–ª–±—Ü—ã
                [0, 4, 8], [2, 4, 6] // –¥–∏–∞–≥–æ–Ω–∞–ª–∏
            ];
            
            for (let pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    return board[a];
                }
            }
            
            return null;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∏—á—å–µ–π
        function isBoardFull(board) {
            return board.every(cell => cell !== null);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä—ã
        function updateGameStatus() {
            const winner = checkWinner(gameBoard);
            const isDraw = isBoardFull(gameBoard) && !winner;
            
            const t = translations[currentLanguage];
            
            if (winner) {
                if (winner === playerSymbol) {
                    gameStatus.textContent = t.youWin;
                    gameStatus.className = 'game-status win';
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    stats.wins++;
                    stats.score += 10;
                    stats.totalWins++;
                    stats.totalGames++;
                } else {
                    gameStatus.textContent = t.youLose;
                    gameStatus.className = 'game-status lose';
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    stats.losses++;
                    stats.score = Math.max(0, stats.score - 5);
                    stats.totalLosses++;
                    stats.totalGames++;
                }
                gameActive = false;
                saveStats();
                updateStatsDisplay();
            } else if (isDraw) {
                gameStatus.textContent = t.draw;
                gameStatus.className = 'game-status draw';
                gameActive = false;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                stats.draws++;
                stats.score += 1;
                stats.totalDraws++;
                stats.totalGames++;
                saveStats();
                updateStatsDisplay();
            } else {
                if (currentPlayer === playerSymbol) {
                    gameStatus.textContent = t.yourTurn;
                    gameStatus.className = 'game-status';
                } else {
                    gameStatus.textContent = t.opponentTurn;
                    gameStatus.className = 'game-status';
                }
                gameActive = true;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function updateBoard() {
            gameBoardElement.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('button');
                cell.className = 'cell';
                cell.dataset.index = i;
                
                if (gameBoard[i]) {
                    cell.textContent = gameBoard[i];
                    cell.classList.add(gameBoard[i].toLowerCase());
                    cell.disabled = true;
                }
                
                // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–∏–≥—Ä—ã—à–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
                if (checkWinner(gameBoard)) {
                    const winner = checkWinner(gameBoard);
                    const winPatterns = [
                        [0, 1, 2], [3, 4, 5], [6, 7, 8],
                        [0, 3, 6], [1, 4, 7], [2, 5, 8],
                        [0, 4, 8], [2, 4, 6]
                    ];
                    
                    for (let pattern of winPatterns) {
                        const [a, b, c] = pattern;
                        if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
                            if (a === i || b === i || c === i) {
                                cell.classList.add('winning-cell');
                            }
                        }
                    }
                }
                
                cell.addEventListener('click', () => makeMove(i));
                gameBoardElement.appendChild(cell);
            }
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–ª–µ—Ç–∫–∏, –µ—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã –∏–ª–∏ –Ω–µ –Ω–∞—à —Ö–æ–¥
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                if (!gameActive || currentPlayer !== playerSymbol || gameBoard[cell.dataset.index]) {
                    cell.disabled = true;
                } else {
                    cell.disabled = false;
                }
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ö–æ–¥–∞
        function makeMove(position) {
            if (!gameActive || currentPlayer !== playerSymbol || gameBoard[position]) {
                return;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            gameBoard[position] = playerSymbol;
            updateBoard();
            updateGameStatus();
            
            if (isAIGame && gameActive) {
                // –•–æ–¥ –ò–ò
                setTimeout(() => makeAIMove(), 500);
            } else if (socket && socket.readyState === 1) {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ —Å–µ—Ç–µ–≤–æ–π –∏–≥—Ä–µ
                const moveData = {
                    type: "make_move",
                    gameId: gameId,
                    playerId: playerId,
                    position: position,
                    symbol: playerSymbol,
                    board: gameBoard
                };
                socket.send(JSON.stringify(moveData));
                showNotification(translations[currentLanguage].notificationMoveMade);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ö–æ–¥–∞ –ò–ò –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        function makeAIMove() {
            if (!gameActive || currentPlayer === playerSymbol) return;
            
            let position;
            
            if (difficulty === "easy") {
                // –õ–µ–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: —Å–ª—É—á–∞–π–Ω—ã–µ —Ö–æ–¥—ã
                position = getRandomMove();
            } else if (difficulty === "medium") {
                // –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å: 50% —Å–ª—É—á–∞–π–Ω—ã–µ, 50% —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ö–æ–¥—ã
                position = Math.random() > 0.5 ? getStrategicMove() : getRandomMove();
            } else {
                // –°–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ö–æ–¥—ã
                position = getStrategicMove();
            }
            
            if (position !== -1) {
                gameBoard[position] = currentPlayer;
                updateBoard();
                updateGameStatus();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ö–æ–¥–∞
        function getRandomMove() {
            const availableMoves = [];
            for (let i = 0; i < 9; i++) {
                if (!gameBoard[i]) availableMoves.push(i);
            }
            
            if (availableMoves.length === 0) return -1;
            
            return availableMoves[Math.floor(Math.random() * availableMoves.length)];
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ö–æ–¥–∞
        function getStrategicMove() {
            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –ª–∏ –ò–ò –≤—ã–∏–≥—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º —Ö–æ–¥–æ–º
            for (let i = 0; i < 9; i++) {
                if (!gameBoard[i]) {
                    gameBoard[i] = currentPlayer;
                    if (checkWinner(gameBoard) === currentPlayer) {
                        gameBoard[i] = null;
                        return i;
                    }
                    gameBoard[i] = null;
                }
            }
            
            // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –ª–∏ –∏–≥—Ä–æ–∫ –≤—ã–∏–≥—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º —Ö–æ–¥–æ–º, –∏ –±–ª–æ–∫–∏—Ä—É–µ–º
            const opponentSymbol = playerSymbol === 'X' ? 'O' : 'X';
            for (let i = 0; i < 9; i++) {
                if (!gameBoard[i]) {
                    gameBoard[i] = opponentSymbol;
                    if (checkWinner(gameBoard) === opponentSymbol) {
                        gameBoard[i] = null;
                        return i;
                    }
                    gameBoard[i] = null;
                }
            }
            
            // 3. –ó–∞–Ω–∏–º–∞–µ–º —Ü–µ–Ω—Ç—Ä, –µ—Å–ª–∏ –æ–Ω —Å–≤–æ–±–æ–¥–µ–Ω
            if (!gameBoard[4]) return 4;
            
            // 4. –ó–∞–Ω–∏–º–∞–µ–º —É–≥–ª—ã
            const corners = [0, 2, 6, 8];
            const availableCorners = corners.filter(i => !gameBoard[i]);
            if (availableCorners.length > 0) {
                return availableCorners[Math.floor(Math.random() * availableCorners.length)];
            }
            
            // 5. –ó–∞–Ω–∏–º–∞–µ–º —Å—Ç–æ—Ä–æ–Ω—ã
            const sides = [1, 3, 5, 7];
            const availableSides = sides.filter(i => !gameBoard[i]);
            if (availableSides.length > 0) {
                return availableSides[Math.floor(Math.random() * availableSides.length)];
            }
            
            return -1;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
        function updatePlayersList() {
            playersList.innerHTML = '';
            
            const playerItem = document.createElement('div');
            playerItem.className = 'player-item current-player';
            playerItem.innerHTML = `
                <span>${playerName} (${currentLanguage === 'ru' ? '–≤—ã' : 'you'})</span>
                <span class="symbol ${playerSymbol.toLowerCase()}">${playerSymbol}</span>
            `;
            playersList.appendChild(playerItem);
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞
            if (gameId && isConnected && playerSymbol && !isAIGame) {
                const opponentSymbol = playerSymbol === 'X' ? 'O' : 'X';
                const opponentItem = document.createElement('div');
                opponentItem.className = 'player-item';
                opponentItem.innerHTML = `
                    <span>${currentLanguage === 'ru' ? '–ò–≥—Ä–æ–∫ 2' : 'Player 2'} (${currentLanguage === 'ru' ? '–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫' : 'opponent'})</span>
                    <span class="symbol ${opponentSymbol.toLowerCase()}">${opponentSymbol}</span>
                `;
                playersList.appendChild(opponentItem);
            } else if (isAIGame) {
                const aiItem = document.createElement('div');
                aiItem.className = 'player-item';
                aiItem.innerHTML = `
                    <span>${currentLanguage === 'ru' ? '–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç' : 'Artificial Intelligence'}</span>
                    <span class="symbol ${playerSymbol === 'X' ? 'o' : 'x'}">${playerSymbol === 'X' ? 'O' : 'X'}</span>
                `;
                playersList.appendChild(aiItem);
            }
        }
        
        // –≠–º—É–ª—è—Ü–∏—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        class WebSocketEmulator {
            constructor(url) {
                this.url = url;
                this.onopen = null;
                this.onmessage = null;
                this.onclose = null;
                this.onerror = null;
                this.readyState = 0; // 0 - CONNECTING, 1 - OPEN, 2 - CLOSING, 3 - CLOSED
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => {
                    this.readyState = 1;
                    if (this.onopen) this.onopen({ type: 'open' });
                }, 500);
            }
            
            send(data) {
                console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:", data);
                
                setTimeout(() => {
                    if (this.onmessage && typeof this.onmessage === 'function') {
                        const parsedData = JSON.parse(data);
                        let response;
                        
                        if (parsedData.type === "create_game") {
                            response = {
                                type: "game_created",
                                gameId: `GAME-${Math.random().toString(36).substr(2, 5).toUpperCase()}`,
                                playerId: `PLAYER-${Math.random().toString(36).substr(2, 5).toUpperCase()}`,
                                symbol: "X"
                            };
                        } else if (parsedData.type === "join_game") {
                            response = {
                                type: "game_joined",
                                gameId: parsedData.gameId,
                                playerId: `PLAYER-${Math.random().toString(36).substr(2, 5).toUpperCase()}`,
                                symbol: "O",
                                board: parsedData.board || Array(9).fill(null),
                                currentPlayer: "X"
                            };
                        } else if (parsedData.type === "make_move") {
                            response = {
                                type: "move_made",
                                gameId: parsedData.gameId,
                                playerId: parsedData.playerId,
                                position: parsedData.position,
                                symbol: parsedData.symbol,
                                board: parsedData.board,
                                currentPlayer: parsedData.symbol === "X" ? "O" : "X",
                                winner: checkWinner(parsedData.board),
                                isDraw: isBoardFull(parsedData.board) && !checkWinner(parsedData.board)
                            };
                        } else if (parsedData.type === "restart_game") {
                            response = {
                                type: "game_restarted",
                                gameId: parsedData.gameId,
                                board: Array(9).fill(null),
                                currentPlayer: "X"
                            };
                        }
                        
                        if (response) {
                            this.onmessage({ data: JSON.stringify(response) });
                        }
                    }
                }, 300);
            }
            
            close() {
                this.readyState = 3;
                if (this.onclose) this.onclose({ type: 'close' });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–≥—Ä–µ
        function connectToGame(id = null) {
            if (socket && socket.readyState === 1) {
                socket.close();
            }
            
            socket = new WebSocketEmulator('ws://localhost:8080');
            
            socket.onopen = () => {
                console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
                isConnected = true;
                connectionStatus.className = 'connection-status connected';
                connectionStatus.innerHTML = '<div class="status-dot"></div><span>' + translations[currentLanguage].connected + '</span>';
                
                if (id) {
                    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–≥—Ä–µ
                    const joinData = {
                        type: "join_game",
                        gameId: id,
                        board: gameBoard
                    };
                    socket.send(JSON.stringify(joinData));
                    
                    gameStatus.textContent = translations[currentLanguage].waitingForPlayer;
                    showNotification(translations[currentLanguage].notificationConnected);
                } else {
                    // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã
                    const createData = {
                        type: "create_game",
                        playerName: playerName
                    };
                    socket.send(JSON.stringify(createData));
                    
                    gameStatus.textContent = translations[currentLanguage].waitingForPlayer;
                    showNotification(translations[currentLanguage].notificationGameCreated);
                }
                
                disconnectBtn.disabled = false;
                restartBtn.disabled = false;
            };
            
            socket.onmessage = (event) => {
                const data = JSON.parse(event.data);
                console.log('–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ:', data);
                
                if (data.type === "game_created") {
                    gameId = data.gameId;
                    playerId = data.playerId;
                    playerSymbol = data.symbol;
                    
                    gameIdElement.textContent = gameId;
                    playerSymbolElement.textContent = playerSymbol;
                    playerSymbolElement.className = `symbol ${playerSymbol.toLowerCase()}`;
                    
                    updatePlayersList();
                    updateGameStatus();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ID –∏–≥—Ä—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
                    gameStatus.innerHTML = `${translations[currentLanguage].gameCreated} <strong>${gameId}</strong><br>${currentLanguage === 'ru' ? '–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–∏–º ID —Å –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–æ–º' : 'Share this ID with another player'}`;
                    
                } else if (data.type === "game_joined") {
                    gameId = data.gameId;
                    playerId = data.playerId;
                    playerSymbol = data.symbol;
                    gameBoard = data.board || Array(9).fill(null);
                    currentPlayer = data.currentPlayer;
                    
                    gameIdElement.textContent = gameId;
                    playerSymbolElement.textContent = playerSymbol;
                    playerSymbolElement.className = `symbol ${playerSymbol.toLowerCase()}`;
                    
                    updateBoard();
                    updateGameStatus();
                    updatePlayersList();
                    
                    gameStatus.textContent = `${translations[currentLanguage].gameJoined} ${gameId}`;
                    showNotification(translations[currentLanguage].notificationGameJoined);
                    
                } else if (data.type === "move_made") {
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã –ø–æ—Å–ª–µ —Ö–æ–¥–∞
                    gameBoard = data.board;
                    currentPlayer = data.currentPlayer;
                    
                    if (data.winner) {
                        gameActive = false;
                    }
                    
                    updateBoard();
                    updateGameStatus();
                    
                } else if (data.type === "game_restarted") {
                    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
                    gameBoard = data.board;
                    currentPlayer = data.currentPlayer;
                    gameActive = true;
                    
                    updateBoard();
                    updateGameStatus();
                    gameStatus.textContent = `${currentLanguage === 'ru' ? '–ò–≥—Ä–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞. –ü–µ—Ä–≤—ã–π —Ö–æ–¥:' : 'Game restarted. First move:'} ${currentPlayer}`;
                }
            };
            
            socket.onclose = () => {
                console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');
                isConnected = false;
                connectionStatus.className = 'connection-status disconnected';
                connectionStatus.innerHTML = '<div class="status-dot"></div><span>' + translations[currentLanguage].statusText + '</span>';
                
                gameActive = false;
                disconnectBtn.disabled = true;
                restartBtn.disabled = true;
                
                gameStatus.textContent = currentLanguage === 'ru' ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ' : 'Connection lost';
                showNotification(translations[currentLanguage].notificationDisconnected);
            };
            
            socket.onerror = (error) => {
                console.error('–û—à–∏–±–∫–∞ WebSocket:', error);
                gameStatus.textContent = currentLanguage === 'ru' ? '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è' : 'Connection error';
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–π –∏–≥—Ä—ã —Å –ò–ò
        function startNewAIGame() {
            isAIGame = true;
            gameId = null;
            gameBoard = Array(9).fill(null);
            playerSymbol = "X";
            currentPlayer = "X";
            gameActive = true;
            
            gameIdElement.textContent = '-----';
            updateBoard();
            updateGameStatus();
            updatePlayersList();
            
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –∏–≥—Ä–∞–µ—Ç –∑–∞ O, –ò–ò –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–≤—ã–π —Ö–æ–¥
            if (playerSymbol === "O") {
                setTimeout(() => makeAIMove(), 500);
            }
            
            showNotification(currentLanguage === 'ru' ? '–ù–æ–≤–∞—è –∏–≥—Ä–∞ —Å –ò–ò –Ω–∞—á–∞—Ç–∞' : 'New AI game started');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–µ–≤–æ–π –∏–≥—Ä—ã
        function createNetworkGame() {
            isAIGame = false;
            connectToGame();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
        function restartGame() {
            if (isAIGame) {
                // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã —Å –ò–ò
                gameBoard = Array(9).fill(null);
                playerSymbol = "X";
                currentPlayer = "X";
                gameActive = true;
                
                updateBoard();
                updateGameStatus();
                
                // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –∏–≥—Ä–∞–µ—Ç –∑–∞ O, –ò–ò –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–≤—ã–π —Ö–æ–¥
                if (playerSymbol === "O") {
                    setTimeout(() => makeAIMove(), 500);
                }
            } else if (socket && socket.readyState === 1 && gameId) {
                // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ç–µ–≤–æ–π –∏–≥—Ä—ã
                const restartData = {
                    type: "restart_game",
                    gameId: gameId,
                    playerId: playerId
                };
                
                socket.send(JSON.stringify(restartData));
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –∏–≥—Ä—ã
        function disconnectGame() {
            if (socket && socket.readyState === 1) {
                socket.close();
            }
            
            isAIGame = false;
            gameId = null;
            playerSymbol = "X";
            gameBoard = Array(9).fill(null);
            currentPlayer = "X";
            gameActive = false;
            
            gameIdElement.textContent = '-----';
            playerSymbolElement.textContent = 'X';
            playerSymbolElement.className = 'symbol x';
            gameStatus.textContent = translations[currentLanguage].statusMessage;
            
            updateBoard();
            updatePlayersList();
            
            disconnectBtn.disabled = true;
            restartBtn.disabled = true;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
        function switchScreen(screenId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            gameScreen.style.display = 'none';
            menuScreen.style.display = 'none';
            statsScreen.style.display = 'none';
            settingsScreen.style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω
            if (screenId === 'game') {
                gameScreen.style.display = 'grid';
            } else if (screenId === 'menu') {
                menuScreen.style.display = 'flex';
            } else if (screenId === 'stats') {
                statsScreen.style.display = 'flex';
            } else if (screenId === 'settings') {
                settingsScreen.style.display = 'flex';
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function init() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            loadStats();
            updateStatsDisplay();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            const savedLanguage = localStorage.getItem('ticTacToeLanguage') || 'ru';
            currentLanguage = savedLanguage;
            languageSelect.value = savedLanguage;
            translateUI(savedLanguage);
            
            const savedName = localStorage.getItem('ticTacToePlayerName') || '–ò–≥—Ä–æ–∫ 1';
            playerName = savedName;
            playerNameInput.value = savedName;
            playerNameElement.textContent = savedName;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
            updateBoard();
            updateGameStatus();
            updatePlayersList();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
            menuButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                    menuButtons.forEach(btn => btn.classList.remove('active'));
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ
                    button.classList.add('active');
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω
                    const screen = button.getAttribute('data-screen');
                    switchScreen(screen === 'game' ? 'game' : screen);
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ–ø—Ü–∏–π –º–µ–Ω—é
            document.getElementById('playOption').addEventListener('click', () => {
                switchScreen('game');
                document.getElementById('playBtn').click();
            });
            
            document.getElementById('multiplayerOption').addEventListener('click', () => {
                switchScreen('game');
                document.getElementById('multiplayerBtn').click();
            });
            
            document.getElementById('statsOption').addEventListener('click', () => {
                switchScreen('stats');
                document.getElementById('statsBtn').click();
            });
            
            document.getElementById('settingsOption').addEventListener('click', () => {
                switchScreen('settings');
                document.getElementById('settingsBtn').click();
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            levelButtons.forEach(button => {
                button.addEventListener('click', () => {
                    levelButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    difficulty = button.getAttribute('data-level');
                    document.getElementById('playerLevel').textContent = 
                        currentLanguage === 'ru' ? 
                            (difficulty === 'easy' ? '–õ–µ–≥–∫–∏–π' : difficulty === 'medium' ? '–°—Ä–µ–¥–Ω–∏–π' : '–°–ª–æ–∂–Ω—ã–π') :
                            (difficulty === 'easy' ? 'Easy' : difficulty === 'medium' ? 'Medium' : 'Hard');
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            newGameBtn.addEventListener('click', startNewAIGame);
            aiGameBtn.addEventListener('click', startNewAIGame);
            createGameBtn.addEventListener('click', createNetworkGame);
            restartBtn.addEventListener('click', restartGame);
            disconnectBtn.addEventListener('click', disconnectGame);
            
            connectBtn.addEventListener('click', () => {
                const id = gameIdInput.value.trim();
                if (id) {
                    isAIGame = false;
                    connectToGame(id);
                    gameIdInput.value = '';
                } else {
                    alert(currentLanguage === 'ru' ? '–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è' : 'Enter game ID to connect');
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
            langBtn.addEventListener('click', () => {
                const newLang = currentLanguage === 'ru' ? 'en' : 'ru';
                translateUI(newLang);
                languageSelect.value = newLang;
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
            languageSelect.addEventListener('change', (e) => {
                translateUI(e.target.value);
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            resetStatsBtn.addEventListener('click', () => {
                if (confirm(currentLanguage === 'ru' ? 
                    '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É?' : 
                    'Are you sure you want to reset statistics?')) {
                    
                    stats = {
                        wins: 0,
                        losses: 0,
                        draws: 0,
                        score: 0,
                        totalGames: 0,
                        totalWins: 0,
                        totalLosses: 0,
                        totalDraws: 0
                    };
                    
                    updateStatsDisplay();
                    saveStats();
                    showNotification(translations[currentLanguage].notificationStatsReset);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
            saveSettingsBtn.addEventListener('click', () => {
                playerName = playerNameInput.value;
                playerNameElement.textContent = playerName;
                
                localStorage.setItem('ticTacToePlayerName', playerName);
                localStorage.setItem('ticTacToeSoundEnabled', soundToggle.checked);
                localStorage.setItem('ticTacToeAnimationsEnabled', animationToggle.checked);
                
                showNotification(translations[currentLanguage].notificationSettingsSaved);
            });
            
            // –ü–æ–∑–≤–æ–ª—è–µ–º –Ω–∞–∂–∞—Ç—å Enter –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–≥—Ä–µ
            gameIdInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    connectBtn.click();
                }
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            switchScreen('menu');
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>